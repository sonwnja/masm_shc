# masm_shc

[![Build status](https://ci.appveyor.com/api/projects/status/y50mphwb8rtg9vh9?svg=true)](https://ci.appveyor.com/project/hasherezade/masm-shc)

A helper utility for creating shellcodes. Cleans MASM file generated by MSVC, gives refactoring hints.

+ [Demos](demos)
+ [Paper (📰 pdf)](https://vxug.fakedoma.in/papers/VXUG/Exclusive/FromaCprojectthroughassemblytoshellcodeHasherezade.pdf)
# step
1，使用命令行中的 MSVC 将示例从 C 编译为 MASM
	cl /c /GS- /FA <文件>.cpp
2，使用 masm_shc 清理获得的 MASM，内联字符串等。
	masm_shc.exe <文件>.asm <已清理文件>.asm
它应该会自动解决大部分问题。其余问题应按照显示的提示手动解决。它还会通知入口点是否已更改

3，将 MASM 生成的文件编译为 PE（类似地，对于 32 位文件使用ml， 对于 64 位文件使用ml64）
	ml <cleaned_file>.asm /link /entry:<my_entry_func>
4，使用 PE-bear 从生成的 PE 中转储 .text 部分。这将是我们的shellcode。
5，使用runshc测试shellcode（记住runshc的bitness必须和shellcode的bitness一样）
